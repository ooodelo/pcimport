# Issue: Аудит — инвентаризация

| Priority | File | Line | Description | Recommendation | Instrument |
| --- | --- | --- | --- | --- | --- |
| P0 | pointcloud_plugin/core/chunk_store.rb | 45 | Использование `Marshal.load` для чтения данных чанков с диска. Если файл кэша подменён, это ведёт к выполнению произвольного кода в контексте SketchUp. | Перейти на безопасный формат сериализации (например, MessagePack/JSON) или проверять целостность и источник кэша перед десериализацией. | Ручной обзор (Brakeman планировался) |
| P2 | pointcloud_plugin/ui/dialog_settings.rb | 205 | Колбэк `import_options` напрямую вызывает `JSON.parse` над пользовательским вводом диалога. Некорректный JSON падает исключением и ломает диалог. | Использовать уже имеющийся `safe_parse_json` или обернуть `JSON.parse` в обработку ошибок, возвращая разумные значения по умолчанию. | Ручной обзор (RuboCop/Reek планировались) |
| P3 | pointcloud_plugin/bridge/main_thread_queue.rb | 45 | Таймер UI запускается один раз и никогда не останавливается после опустошения очереди, что удерживает фоновые тики и тратит ресурсы. | Сбрасывать таймер, когда очередь пуста, или использовать одноразовый таймер, который перезапускается только при наличии задач. | Ручной обзор |

> Примечание: RuboCop, Reek, Brakeman и RubyCritic не удалось запустить из‑за отсутствия gems в окружении (см. отчёты в каталоге reports).
